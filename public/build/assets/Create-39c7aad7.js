import{_ as V}from"./AuthenticatedLayout-8214144f.js";import{_ as w,a as g}from"./TextInput-b3b4edbd.js";import{S as I}from"./Select2Input-03e63d7d.js";import{_ as k}from"./PrimaryButton-c6f683ae.js";import{Z as C,k as m,o as _,c as p,a as s,w as f,F as y,b as h,d as o,f as q,t as i,l as U}from"./app-dae928ff.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const P={props:{mustVerifyEmail:Boolean,status:String,customers:Object,products:Object,sr:Array},components:{AuthenticatedLayout:V,InputLabel:w,TextInput:g,Select2Input:I,Head:C,PrimaryButton:k},data(){return{formData:{product_id:"",total_quantity:"",total_amount:"",gross_amount:"",total_discount:"",net_amount:"",customer_id:"",sale_date:"",remaining_stock:"",addedItems:[]},addedItems:[]}},mounted(){this.formData.sale_date=new Date().toISOString().split("T")[0]},methods:{submitForm(){this.formData.addedItems=this.addedItems,this.$inertia.post(route("wsinvoices.store"),this.formData,{onSuccess:()=>{this.$inertia.visit(route("wsinvoices.create"))}})},quantityWisePrice(){const l=this.formData.quantity;this.formData.total_rate=(l*this.formData.purchase_rate).toFixed(2)},calculateDiscountAmount(){const l=this.formData.total_rate;if(isNaN(this.formData.discount_percent)){const t=(this.formData.discount/l*100).toFixed(2);this.formData.discount_percent=t,this.formData.total_rate=(l-this.formData.discount).toFixed(2)}else{const t=this.formData.discount_percent,u=l*t/100;this.formData.discount=u,this.formData.total_rate=(l-u).toFixed(2)}},calculateNetAmount(){this.formData.total_amount=parseFloat(this.formData.net_amount)+parseFloat(this.formData.service_charges)},getCustomerDetails(l){const t=this.customers.find(u=>u.id===parseInt(l));t?(this.formData.customer_address=t.address,this.formData.customer_code=t.id,this.formData.customer_id=t.id):(this.formData.customer_address="",this.formData.customer_code="",this.formData.customer_id="")},getProductDetails(l){const t=this.products.find(u=>u.id===parseInt(l));t?(this.formData.product_id=t.id,this.formData.product_code=t.id,this.formData.sale_rate=t.whole_sale_rate,this.formData.purchase_rate=t.purchase_rate,this.formData.batch_no=t.batch_no,this.formData.expiry_date=t.expiry_date,this.formData.expiry_alert_days=t.expiry_alert_days,this.formData.remaining_stock=t.remaining_stock):(this.formData.product_id="",this.formData.product_code="",this.formData.sale_rate="",this.formData.purchase_rate="",this.formData.batch_no="",this.formData.expiry_date="",this.formData.expiry_alert_days="")},addItem(){this.addedItems.push({product_code:this.formData.product_code,product_name:this.getProductById(this.formData.product_id),quantity:this.formData.quantity,purchase_rate:this.formData.purchase_rate,batch_no:this.formData.batch_no,discount:this.formData.discount?this.formData.discount:0,discount_percent:this.formData.discount_percent?this.formData.discount_percent:0,total_rate:this.formData.total_rate,desc:this.formData.desc,manual_no:this.formData.manual_no,customer_id:this.formData.customer_id,product_id:this.formData.product_id,purchase_date:this.formData.purchase_date,sale_date:this.formData.sale_date}),this.formData.total_quantity=this.addedItems.reduce((l,t)=>l+parseInt(t.quantity),0),this.formData.total_amount=this.addedItems.reduce((l,t)=>l+parseFloat(t.total_rate),0),this.formData.total_discount=this.addedItems.reduce((l,t)=>l+parseInt(t.discount),0),this.formData.net_amount=this.addedItems.reduce((l,t)=>l+parseFloat(t.total_rate),0),this.formData.total_items=this.addedItems.length,this.formData.product_code="",this.formData.product_id="",this.formData.quantity="",this.formData.purchase_rate="",this.formData.batch_no="",this.formData.discount=void 0,this.formData.discount_percent=void 0,this.formData.total_rate="",this.formData.expiry_alert_days="",this.formData.purchase_date="",this.formData.expiry_date=""},removeItem(l){this.addedItems.splice(l,1),this.formData.total_quantity=this.addedItems.reduce((t,u)=>t+parseInt(u.quantity),0),this.formData.total_amount=this.addedItems.reduce((t,u)=>t+parseFloat(u.total_rate),0),this.formData.total_discount=this.addedItems.reduce((t,u)=>t+parseInt(u.discount),0),this.formData.net_amount=this.addedItems.reduce((t,u)=>t+parseFloat(u.total_rate),0),this.formData.total_items=this.addedItems.length},getProductById(l){const t=this.products.find(u=>u.id===l);return t?t.text:""}}},S={style:{"font-size":"20px"}},F=o("br",null,null,-1),N={class:"flex space-x-4"},B={class:"w-1/6"},T={class:"text-rose-500"},L={class:"flex space-x-4"},R={class:"w-1/6"},E={class:"w-1/6"},W={class:"w-1/6"},H={class:"w-1/6"},O={class:"w-1/6"},Q={class:"w-1/6"},j={class:"w-1/6"},K={class:"flex space-x-4"},M={class:"w-1/6"},z={class:"w-1/6"},Z={class:"w-1/6"},G={class:"w-1/6"},J={class:"w-1/6"},X={class:"w-1/6"},Y={class:"w-1/6"},$={class:"flex space-x-4"},tt={class:"w-1/6"},et={class:"w-1/6"},ot={class:"w-1/6"},at={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},st={class:"overflow-x-auto w-full"},lt={class:"w-full whitespace-no-wrap"},rt=o("thead",null,[o("tr",{class:"text-xs font-semibold tracking-wide text-left text-gray-500 uppercase bg-gray-50 border-b"},[o("th",{class:"px-4 py-3"},"Sr"),o("th",{class:"px-4 py-3"},"Product Code"),o("th",{class:"px-4 py-3"},"Product Name"),o("th",{class:"px-4 py-3"},"Qty"),o("th",{class:"px-4 py-3"},"Purchase Rate"),o("th",{class:"px-4 py-3"},"Batch No"),o("th",{class:"px-4 py-3"},"Discount Amount"),o("th",{class:"px-4 py-3"},"Total Amount"),o("th",{class:"px-4 py-3"},"Action")])],-1),dt={class:"bg-white divide-y"},ut={class:"px-4 py-3 text-sm"},nt={class:"px-4 py-3 text-sm"},it={class:"px-4 py-3 text-sm"},mt={class:"px-4 py-3 text-sm"},ct={class:"px-4 py-3 text-sm"},_t={class:"px-4 py-3 text-sm"},pt={class:"px-4 py-3 text-sm"},ft={class:"px-4 py-3 text-sm"},ht={class:"px-4 py-3 text-sm"},Dt=["onClick"],yt=o("br",null,null,-1),xt={class:"flex space-x-4"},vt={class:"w-1/6"},bt={class:"w-1/6"},Vt={class:"w-1/6"},wt={class:"w-1/6"},gt={class:"w-1/6"},It={class:"w-1/6"},kt=o("br",null,null,-1);function Ct(l,t,u,qt,a,n){const x=m("Head"),r=m("InputLabel"),d=m("TextInput"),D=m("Select2Input"),v=m("PrimaryButton"),b=m("AuthenticatedLayout");return _(),p(y,null,[s(x,{title:"Whole Sale Invoice"}),s(b,null,{header:f(()=>[h(" Whole Sale Invoice ")]),default:f(()=>[o("div",null,[o("form",{onSubmit:t[28]||(t[28]=q((...e)=>n.submitForm&&n.submitForm(...e),["prevent"])),class:"mt-2 space-y-2"},[o("b",S," INV-"+i(u.sr+1),1),F,o("div",N,[o("div",B,[o("h1",T,[h("Remaining "),o("span",null,i(a.formData.remaining_stock),1)])])]),o("div",L,[o("div",R,[s(r,{for:"sale_date",value:"Sale Date"}),s(d,{id:"sale_date",ref:"sale_date",modelValue:a.formData.sale_date,"onUpdate:modelValue":t[0]||(t[0]=e=>a.formData.sale_date=e),type:"date",class:"mt-1 block w-full",autocomplete:"sale_date"},null,8,["modelValue"])]),o("div",E,[s(r,{for:"manual_no",value:"Manual No"}),s(d,{id:"manual_no",ref:"manual_no",modelValue:a.formData.manual_no,"onUpdate:modelValue":t[1]||(t[1]=e=>a.formData.manual_no=e),type:"number",class:"mt-1 block w-full",autocomplete:"manual_no"},null,8,["modelValue"])]),o("div",W,[s(r,{for:"desc",value:"Description"}),s(d,{id:"desc",ref:"desc",modelValue:a.formData.desc,"onUpdate:modelValue":t[2]||(t[2]=e=>a.formData.desc=e),type:"text",class:"mt-1 block w-full",autocomplete:"desc"},null,8,["modelValue"])]),o("div",H,[s(r,{for:"customer",value:"Customer Code"}),s(d,{onChange:t[3]||(t[3]=e=>n.getCustomerDetails(a.formData.customer_code)),id:"customer_code",ref:"customer_code",modelValue:a.formData.customer_code,"onUpdate:modelValue":t[4]||(t[4]=e=>a.formData.customer_code=e),type:"number",class:"mt-1 block w-full",autocomplete:"customer_code",readonly:""},null,8,["modelValue"])]),o("div",O,[s(r,{for:"customer",value:"Customer Name"}),s(D,{options:u.customers,onChange:t[5]||(t[5]=e=>n.getCustomerDetails(e)),modelValue:a.formData.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>a.formData.customer_id=e),style:{width:"-webkit-fill-available"}},null,8,["options","modelValue"])]),o("div",Q,[s(r,{for:"customer_address",value:"Customer Address"}),s(d,{readonly:"",id:"customer_address",ref:"customer_address",modelValue:a.formData.customer_address,"onUpdate:modelValue":t[7]||(t[7]=e=>a.formData.customer_address=e),type:"text",class:"mt-1 block w-full",autocomplete:"customer_address"},null,8,["modelValue"])]),o("div",j,[s(r,{for:"product_code",value:"Product Code"}),s(d,{onChange:t[8]||(t[8]=e=>n.getProductDetails(a.formData.product_code)),id:"product_code",ref:"product_code",modelValue:a.formData.product_code,"onUpdate:modelValue":t[9]||(t[9]=e=>a.formData.product_code=e),type:"text",class:"mt-1 block w-full",autocomplete:"product_code",readonly:""},null,8,["modelValue"])])]),o("div",K,[o("div",M,[s(r,{for:"product",value:"Product Name"}),s(D,{options:u.products,onChange:t[10]||(t[10]=e=>n.getProductDetails(e)),modelValue:a.formData.product_id,"onUpdate:modelValue":t[11]||(t[11]=e=>a.formData.product_id=e),style:{width:"-webkit-fill-available"}},null,8,["options","modelValue"])]),o("div",z,[s(r,{for:"quantity",value:"Quantity"}),s(d,{id:"quantity",ref:"quantity",modelValue:a.formData.quantity,"onUpdate:modelValue":t[12]||(t[12]=e=>a.formData.quantity=e),type:"text",class:"mt-1 block w-full",autocomplete:"quantity",onKeyup:n.quantityWisePrice},null,8,["modelValue","onKeyup"])]),o("div",Z,[s(r,{for:"batch_no",value:"Batch No"}),s(d,{id:"batch_no",ref:"batch_no",modelValue:a.formData.batch_no,"onUpdate:modelValue":t[13]||(t[13]=e=>a.formData.batch_no=e),type:"text",class:"mt-1 block w-full",autocomplete:"batch_no",readonly:""},null,8,["modelValue"])]),o("div",G,[s(r,{for:"purchase_rate",value:"Purchase Rate"}),s(d,{id:"purchase_rate",ref:"purchase_rate",modelValue:a.formData.purchase_rate,"onUpdate:modelValue":t[14]||(t[14]=e=>a.formData.purchase_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"purchase_rate",readonly:""},null,8,["modelValue"])]),o("div",J,[s(r,{for:"sale_rate",value:"Sale Rate"}),s(d,{id:"sale_rate",ref:"sale_rate",modelValue:a.formData.sale_rate,"onUpdate:modelValue":t[15]||(t[15]=e=>a.formData.sale_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"sale_rate"},null,8,["modelValue"])]),o("div",X,[s(r,{for:"discount_percent",value:"Discount %"}),s(d,{id:"discount_percent",ref:"discount_percent",modelValue:a.formData.discount_percent,"onUpdate:modelValue":t[16]||(t[16]=e=>a.formData.discount_percent=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"discount_percent",onChange:n.calculateDiscountAmount},null,8,["modelValue","onChange"])]),o("div",Y,[s(r,{for:"discount",value:"Discount Amount"}),s(d,{id:"discount",ref:"discount",modelValue:a.formData.discount,"onUpdate:modelValue":t[17]||(t[17]=e=>a.formData.discount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"discount",onChange:n.calculateDiscountAmount},null,8,["modelValue","onChange"])])]),o("div",$,[o("div",tt,[s(r,{for:"total_rate",value:"Total Rate"}),s(d,{id:"total_rate",ref:"total_rate",modelValue:a.formData.total_rate,"onUpdate:modelValue":t[18]||(t[18]=e=>a.formData.total_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_rate",readonly:""},null,8,["modelValue"])]),o("div",et,[s(r,{for:"expiry_date",value:"Expiry Date"}),s(d,{id:"expiry_date",ref:"expiry_date",modelValue:a.formData.expiry_date,"onUpdate:modelValue":t[19]||(t[19]=e=>a.formData.expiry_date=e),type:"date",class:"mt-1 block w-full",autocomplete:"expiry_date",readonly:""},null,8,["modelValue"])]),o("div",ot,[s(r,{for:"expiry_alert_days",value:"Expiry Alert Days"}),s(d,{id:"expiry_alert_days",ref:"expiry_alert_days",modelValue:a.formData.expiry_alert_days,"onUpdate:modelValue":t[20]||(t[20]=e=>a.formData.expiry_alert_days=e),type:"number",class:"mt-1 block w-full",autocomplete:"expiry_alert_days",readonly:""},null,8,["modelValue"])])]),o("button",{type:"button",onClick:t[21]||(t[21]=(...e)=>n.addItem&&n.addItem(...e)),class:"rounded-lg border border-transparent bg-purple-600 px-4 py-2 text-center text-sm font-medium leading-5 text-white transition-colors duration-150 hover:bg-purple-700 focus:outline-none focus:ring active:bg-purple-600"},"Add"),o("div",at,[o("div",st,[o("table",lt,[rt,o("tbody",dt,[(_(!0),p(y,null,U(a.addedItems,(e,c)=>(_(),p("tr",{class:"text-gray-700",key:c},[o("td",ut,i(c+1),1),o("td",nt,i(e.product_code),1),o("td",it,i(e.product_name),1),o("td",mt,i(e.quantity),1),o("td",ct,i(e.purchase_rate),1),o("td",_t,i(e.batch_no),1),o("td",pt,i(e.discount),1),o("td",ft,i(e.total_rate),1),o("td",ht,[o("button",{type:"button",onClick:Ut=>n.removeItem(c)},"Remove",8,Dt)])]))),128))])])])]),yt,o("div",xt,[o("div",vt,[s(r,{for:"total_items",value:"Total Items"}),s(d,{id:"total_items",ref:"total_items",modelValue:a.formData.total_items,"onUpdate:modelValue":t[22]||(t[22]=e=>a.formData.total_items=e),type:"number",class:"mt-1 block w-full",autocomplete:"total_items",readonly:""},null,8,["modelValue"])]),o("div",bt,[s(r,{for:"total_quantity",value:"Total Quantity"}),s(d,{id:"total_quantity",ref:"total_quantity",modelValue:a.formData.total_quantity,"onUpdate:modelValue":t[23]||(t[23]=e=>a.formData.total_quantity=e),type:"number",class:"mt-1 block w-full",autocomplete:"total_quantity",readonly:""},null,8,["modelValue"])]),o("div",Vt,[s(r,{for:"net_amount",value:"Net Amount"}),s(d,{id:"net_amount",ref:"net_amount",modelValue:a.formData.net_amount,"onUpdate:modelValue":t[24]||(t[24]=e=>a.formData.net_amount=e),type:"number",step:"0.01",class:"mt-1 block w-full",readonly:"",autocomplete:"net_amount"},null,8,["modelValue"])]),o("div",wt,[s(r,{for:"service_charges",value:"Service Charges"}),s(d,{id:"service_charges",ref:"service_charges",modelValue:a.formData.service_charges,"onUpdate:modelValue":t[25]||(t[25]=e=>a.formData.service_charges=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"service_charges",onChange:n.calculateNetAmount},null,8,["modelValue","onChange"])]),o("div",gt,[s(r,{for:"total_discount",value:"Total Discount"}),s(d,{id:"total_discount",ref:"total_discount",modelValue:a.formData.total_discount,"onUpdate:modelValue":t[26]||(t[26]=e=>a.formData.total_discount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_discount",readonly:""},null,8,["modelValue"])]),o("div",It,[s(r,{for:"total_amount",value:"Total Amount"}),s(d,{id:"total_amount",ref:"total_amount",modelValue:a.formData.total_amount,"onUpdate:modelValue":t[27]||(t[27]=e=>a.formData.total_amount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_amount",readonly:""},null,8,["modelValue"])])]),kt,s(v,null,{default:f(()=>[h("Save")]),_:1})],32)])]),_:1})],64)}const Tt=A(P,[["render",Ct]]);export{Tt as default};
