import{_ as g}from"./AuthenticatedLayout-2f90a5f5.js";import{_ as I,a as k}from"./TextInput-ca318154.js";import{_ as C}from"./PrimaryButton-2c55c2ce.js";import{Z as q,k as p,o as m,c,a as s,w as h,F as f,b as D,d as o,f as U,t as i,i as v,m as x,l as y}from"./app-352ce6fa.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const P={props:{mustVerifyEmail:Boolean,status:String,customers:Object,products:Object,sr:Array},components:{AuthenticatedLayout:g,InputLabel:I,TextInput:k,Head:q,PrimaryButton:C},data(){return{formData:{product_id:"",total_quantity:"",total_amount:"",gross_amount:"",total_discount:"",net_amount:"",customer_id:"",addedItems:[]},addedItems:[]}},methods:{submitForm(){this.formData.addedItems=this.addedItems,this.$inertia.post(route("wsreturninvoices.store"),this.formData,{onSuccess:()=>{this.$inertia.visit(route("wsreturninvoices.create"))}})},quantityWisePrice(){const r=this.formData.quantity;this.formData.total_rate=(r*this.formData.purchase_rate).toFixed(2)},calculateDiscountAmount(){const r=this.formData.total_rate;if(isNaN(this.formData.discount_percent)){const t=(this.formData.discount/r*100).toFixed(2);this.formData.discount_percent=t,this.formData.total_rate=(r-this.formData.discount).toFixed(2)}else{const t=this.formData.discount_percent,u=r*t/100;this.formData.discount=u,this.formData.total_rate=(r-u).toFixed(2)}},calculateNetAmount(){this.formData.total_amount=parseFloat(this.formData.net_amount)+parseFloat(this.formData.service_charges)},getCustomerDetails(r){const t=this.customers.find(u=>u.id===parseInt(r));t?(this.formData.customer_address=t.address,this.formData.customer_code=t.id,this.formData.customer_id=t.id):(this.formData.customer_address="",this.formData.customer_code="",this.formData.customer_id="")},getProductDetails(r){const t=this.products.find(u=>u.id===parseInt(r));t?(this.formData.product_id=t.id,this.formData.product_code=t.id,this.formData.sale_rate=t.sale_rate,this.formData.purchase_rate=t.purchase_rate,this.formData.batch_no=t.batch_no,this.formData.expiry_date=t.expiry_date,this.formData.expiry_alert_days=t.expiry_alert_days):(this.formData.product_id="",this.formData.product_code="",this.formData.sale_rate="",this.formData.purchase_rate="",this.formData.batch_no="",this.formData.expiry_date="",this.formData.expiry_alert_days="")},addItem(){this.addedItems.push({product_code:this.formData.product_code,product_name:this.getProductById(this.formData.product_id),quantity:this.formData.quantity,purchase_rate:this.formData.purchase_rate,batch_no:this.formData.batch_no,discount:this.formData.discount,discount_percent:this.formData.discount_percent,total_rate:this.formData.total_rate,desc:this.formData.desc,manual_no:this.formData.manual_no,customer_id:this.formData.customer_id,product_id:this.formData.product_id,purchase_date:this.formData.purchase_date,sale_date:this.formData.sale_date}),this.formData.total_quantity=this.addedItems.reduce((r,t)=>r+parseInt(t.quantity),0),this.formData.total_amount=this.addedItems.reduce((r,t)=>r+parseFloat(t.total_rate),0),this.formData.total_discount=this.addedItems.reduce((r,t)=>r+parseInt(t.discount),0),this.formData.net_amount=this.addedItems.reduce((r,t)=>r+parseFloat(t.total_rate),0),this.formData.total_items=this.addedItems.length,this.formData.product_code="",this.formData.product_id="",this.formData.quantity="",this.formData.purchase_rate="",this.formData.batch_no="",this.formData.discount=void 0,this.formData.discount_percent=void 0,this.formData.total_rate="",this.formData.expiry_alert_days="",this.formData.purchase_date="",this.formData.expiry_date=""},removeItem(r){this.addedItems.splice(r,1),this.formData.total_quantity=this.addedItems.reduce((t,u)=>t+parseInt(u.quantity),0),this.formData.total_amount=this.addedItems.reduce((t,u)=>t+parseFloat(u.total_rate),0),this.formData.total_discount=this.addedItems.reduce((t,u)=>t+parseInt(u.discount),0),this.formData.net_amount=this.addedItems.reduce((t,u)=>t+parseFloat(u.total_rate),0),this.formData.total_items=this.addedItems.length},getProductById(r){const t=this.products.find(u=>u.id===r);return t?t.name:""}}},F={style:{"font-size":"20px"}},N=o("br",null,null,-1),S={class:"flex space-x-4"},B={class:"w-1/6"},T={class:"w-1/6"},R={class:"w-1/6"},L={class:"w-1/6"},E={class:"w-1/6"},W=o("option",{value:""},"Select option",-1),H=["value"],M={class:"w-1/6"},Q={class:"w-1/6"},j={class:"flex space-x-4"},K={class:"w-1/6"},O=o("option",{value:""},"Select option",-1),z=["value"],Z={class:"w-1/6"},G={class:"w-1/6"},J={class:"w-1/6"},X={class:"w-1/6"},Y={class:"w-1/6"},$={class:"w-1/6"},tt={class:"w-1/6"},et={class:"flex space-x-4"},ot={class:"w-1/6"},at={class:"w-1/6"},st={class:"w-1/6"},lt={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},rt={class:"overflow-x-auto w-full"},dt={class:"w-full whitespace-no-wrap"},ut=o("thead",null,[o("tr",{class:"text-xs font-semibold tracking-wide text-left text-gray-500 uppercase bg-gray-50 border-b"},[o("th",{class:"px-4 py-3"},"Sr"),o("th",{class:"px-4 py-3"},"Product Code"),o("th",{class:"px-4 py-3"},"Product Name"),o("th",{class:"px-4 py-3"},"Qty"),o("th",{class:"px-4 py-3"},"Purchase Rate"),o("th",{class:"px-4 py-3"},"Batch No"),o("th",{class:"px-4 py-3"},"Discount Amount"),o("th",{class:"px-4 py-3"},"Total Amount"),o("th",{class:"px-4 py-3"},"Action")])],-1),nt={class:"bg-white divide-y"},it={class:"px-4 py-3 text-sm"},mt={class:"px-4 py-3 text-sm"},ct={class:"px-4 py-3 text-sm"},_t={class:"px-4 py-3 text-sm"},pt={class:"px-4 py-3 text-sm"},ft={class:"px-4 py-3 text-sm"},ht={class:"px-4 py-3 text-sm"},yt={class:"px-4 py-3 text-sm"},Dt={class:"px-4 py-3 text-sm"},vt=["onClick"],xt=o("br",null,null,-1),bt={class:"flex space-x-4"},Vt={class:"w-1/6"},wt={class:"w-1/6"},gt={class:"w-1/6"},It={class:"w-1/6"},kt={class:"w-1/6"},Ct={class:"w-1/6"},qt=o("br",null,null,-1);function Ut(r,t,u,At,a,n){const b=p("Head"),l=p("InputLabel"),d=p("TextInput"),V=p("PrimaryButton"),w=p("AuthenticatedLayout");return m(),c(f,null,[s(b,{title:"Whole Sale Return Invoice"}),s(w,null,{header:h(()=>[D(" Whole Sale Return Invoice ")]),default:h(()=>[o("div",null,[o("form",{onSubmit:t[29]||(t[29]=U((...e)=>n.submitForm&&n.submitForm(...e),["prevent"])),class:"mt-2 space-y-2"},[o("b",F," INV-"+i(u.sr+1),1),N,o("div",S,[o("div",B,[s(l,{for:"sale_date",value:"Sale Date"}),s(d,{id:"sale_date",ref:"sale_date",modelValue:a.formData.sale_date,"onUpdate:modelValue":t[0]||(t[0]=e=>a.formData.sale_date=e),type:"date",class:"mt-1 block w-full",autocomplete:"sale_date"},null,8,["modelValue"])]),o("div",T,[s(l,{for:"manual_no",value:"Manual No"}),s(d,{id:"manual_no",ref:"manual_no",modelValue:a.formData.manual_no,"onUpdate:modelValue":t[1]||(t[1]=e=>a.formData.manual_no=e),type:"number",class:"mt-1 block w-full",autocomplete:"manual_no"},null,8,["modelValue"])]),o("div",R,[s(l,{for:"desc",value:"Description"}),s(d,{id:"desc",ref:"desc",modelValue:a.formData.desc,"onUpdate:modelValue":t[2]||(t[2]=e=>a.formData.desc=e),type:"text",class:"mt-1 block w-full",autocomplete:"desc"},null,8,["modelValue"])]),o("div",L,[s(l,{for:"customer",value:"Customer Code"}),s(d,{onChange:t[3]||(t[3]=e=>n.getCustomerDetails(a.formData.customer_code)),id:"customer_code",ref:"customer_code",modelValue:a.formData.customer_code,"onUpdate:modelValue":t[4]||(t[4]=e=>a.formData.customer_code=e),type:"number",class:"mt-1 block w-full",autocomplete:"customer_code",readonly:""},null,8,["modelValue"])]),o("div",E,[s(l,{for:"customer",value:"Customer Name"}),v(o("select",{onChange:t[5]||(t[5]=e=>n.getCustomerDetails(a.formData.customer_id)),"onUpdate:modelValue":t[6]||(t[6]=e=>a.formData.customer_id=e),id:"",class:"mt-1 border-gray-300 rounded-md shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 focus-within:text-primary-600"},[W,(m(!0),c(f,null,y(u.customers,(e,_)=>(m(),c("option",{value:e.id},i(e.name),9,H))),256))],544),[[x,a.formData.customer_id]])]),o("div",M,[s(l,{for:"customer_address",value:"Customer Address"}),s(d,{readonly:"",id:"customer_address",ref:"customer_address",modelValue:a.formData.customer_address,"onUpdate:modelValue":t[7]||(t[7]=e=>a.formData.customer_address=e),type:"text",class:"mt-1 block w-full",autocomplete:"customer_address"},null,8,["modelValue"])]),o("div",Q,[s(l,{for:"product_code",value:"Product Code"}),s(d,{onChange:t[8]||(t[8]=e=>n.getProductDetails(a.formData.product_code)),id:"product_code",ref:"product_code",modelValue:a.formData.product_code,"onUpdate:modelValue":t[9]||(t[9]=e=>a.formData.product_code=e),type:"text",class:"mt-1 block w-full",autocomplete:"product_code",readonly:""},null,8,["modelValue"])])]),o("div",j,[o("div",K,[s(l,{for:"product",value:"Product Name"}),v(o("select",{onChange:t[10]||(t[10]=e=>n.getProductDetails(a.formData.product_id)),"onUpdate:modelValue":t[11]||(t[11]=e=>a.formData.product_id=e),id:"",class:"mt-1 border-gray-300 rounded-md shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 focus-within:text-primary-600"},[O,(m(!0),c(f,null,y(u.products,(e,_)=>(m(),c("option",{value:e.id},i(e.name),9,z))),256))],544),[[x,a.formData.product_id]])]),o("div",Z,[s(l,{for:"quantity",value:"Quantity"}),s(d,{id:"quantity",ref:"quantity",modelValue:a.formData.quantity,"onUpdate:modelValue":t[12]||(t[12]=e=>a.formData.quantity=e),type:"text",class:"mt-1 block w-full",autocomplete:"quantity",onKeyup:n.quantityWisePrice},null,8,["modelValue","onKeyup"])]),o("div",G,[s(l,{for:"batch_no",value:"Batch No"}),s(d,{id:"batch_no",ref:"batch_no",modelValue:a.formData.batch_no,"onUpdate:modelValue":t[13]||(t[13]=e=>a.formData.batch_no=e),type:"text",class:"mt-1 block w-full",autocomplete:"batch_no",readonly:""},null,8,["modelValue"])]),o("div",J,[s(l,{for:"purchase_date",value:"Purchase date"}),s(d,{id:"purchase_date",ref:"purchase_date",modelValue:a.formData.purchase_date,"onUpdate:modelValue":t[14]||(t[14]=e=>a.formData.purchase_date=e),type:"date",class:"mt-1 block w-full",autocomplete:"purchase_date"},null,8,["modelValue"])]),o("div",X,[s(l,{for:"purchase_rate",value:"Purchase Rate"}),s(d,{id:"purchase_rate",ref:"purchase_rate",modelValue:a.formData.purchase_rate,"onUpdate:modelValue":t[15]||(t[15]=e=>a.formData.purchase_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"purchase_rate",readonly:""},null,8,["modelValue"])]),o("div",Y,[s(l,{for:"sale_rate",value:"Sale Rate"}),s(d,{id:"sale_rate",ref:"sale_rate",modelValue:a.formData.sale_rate,"onUpdate:modelValue":t[16]||(t[16]=e=>a.formData.sale_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"sale_rate",readonly:""},null,8,["modelValue"])]),o("div",$,[s(l,{for:"discount_percent",value:"Discount %"}),s(d,{id:"discount_percent",ref:"discount_percent",modelValue:a.formData.discount_percent,"onUpdate:modelValue":t[17]||(t[17]=e=>a.formData.discount_percent=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"discount_percent",onChange:n.calculateDiscountAmount},null,8,["modelValue","onChange"])]),o("div",tt,[s(l,{for:"discount",value:"Discount Amount"}),s(d,{id:"discount",ref:"discount",modelValue:a.formData.discount,"onUpdate:modelValue":t[18]||(t[18]=e=>a.formData.discount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"discount",onChange:n.calculateDiscountAmount},null,8,["modelValue","onChange"])])]),o("div",et,[o("div",ot,[s(l,{for:"total_rate",value:"Total Rate"}),s(d,{id:"total_rate",ref:"total_rate",modelValue:a.formData.total_rate,"onUpdate:modelValue":t[19]||(t[19]=e=>a.formData.total_rate=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_rate",readonly:""},null,8,["modelValue"])]),o("div",at,[s(l,{for:"expiry_date",value:"Expiry Date"}),s(d,{id:"expiry_date",ref:"expiry_date",modelValue:a.formData.expiry_date,"onUpdate:modelValue":t[20]||(t[20]=e=>a.formData.expiry_date=e),type:"date",class:"mt-1 block w-full",autocomplete:"expiry_date",readonly:""},null,8,["modelValue"])]),o("div",st,[s(l,{for:"expiry_alert_days",value:"Expiry Alert Days"}),s(d,{id:"expiry_alert_days",ref:"expiry_alert_days",modelValue:a.formData.expiry_alert_days,"onUpdate:modelValue":t[21]||(t[21]=e=>a.formData.expiry_alert_days=e),type:"number",class:"mt-1 block w-full",autocomplete:"expiry_alert_days",readonly:""},null,8,["modelValue"])])]),o("button",{type:"button",onClick:t[22]||(t[22]=(...e)=>n.addItem&&n.addItem(...e)),class:"rounded-lg border border-transparent bg-purple-600 px-4 py-2 text-center text-sm font-medium leading-5 text-white transition-colors duration-150 hover:bg-purple-700 focus:outline-none focus:ring active:bg-purple-600"},"Add"),o("div",lt,[o("div",rt,[o("table",dt,[ut,o("tbody",nt,[(m(!0),c(f,null,y(a.addedItems,(e,_)=>(m(),c("tr",{class:"text-gray-700",key:_},[o("td",it,i(_+1),1),o("td",mt,i(e.product_code),1),o("td",ct,i(e.product_name),1),o("td",_t,i(e.quantity),1),o("td",pt,i(e.purchase_rate),1),o("td",ft,i(e.batch_no),1),o("td",ht,i(e.discount),1),o("td",yt,i(e.total_rate),1),o("td",Dt,[o("button",{type:"button",onClick:Pt=>n.removeItem(_)},"Remove",8,vt)])]))),128))])])])]),xt,o("div",bt,[o("div",Vt,[s(l,{for:"total_items",value:"Total Items"}),s(d,{id:"total_items",ref:"total_items",modelValue:a.formData.total_items,"onUpdate:modelValue":t[23]||(t[23]=e=>a.formData.total_items=e),type:"number",class:"mt-1 block w-full",autocomplete:"total_items",readonly:""},null,8,["modelValue"])]),o("div",wt,[s(l,{for:"total_quantity",value:"Total Quantity"}),s(d,{id:"total_quantity",ref:"total_quantity",modelValue:a.formData.total_quantity,"onUpdate:modelValue":t[24]||(t[24]=e=>a.formData.total_quantity=e),type:"number",class:"mt-1 block w-full",autocomplete:"total_quantity",readonly:""},null,8,["modelValue"])]),o("div",gt,[s(l,{for:"net_amount",value:"Net Amount"}),s(d,{id:"net_amount",ref:"net_amount",modelValue:a.formData.net_amount,"onUpdate:modelValue":t[25]||(t[25]=e=>a.formData.net_amount=e),type:"number",step:"0.01",class:"mt-1 block w-full",readonly:"",autocomplete:"net_amount"},null,8,["modelValue"])]),o("div",It,[s(l,{for:"service_charges",value:"Service Charges"}),s(d,{id:"service_charges",ref:"service_charges",modelValue:a.formData.service_charges,"onUpdate:modelValue":t[26]||(t[26]=e=>a.formData.service_charges=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"service_charges",onChange:n.calculateNetAmount},null,8,["modelValue","onChange"])]),o("div",kt,[s(l,{for:"total_discount",value:"Total Discount"}),s(d,{id:"total_discount",ref:"total_discount",modelValue:a.formData.total_discount,"onUpdate:modelValue":t[27]||(t[27]=e=>a.formData.total_discount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_discount",readonly:""},null,8,["modelValue"])]),o("div",Ct,[s(l,{for:"total_amount",value:"Total Amount"}),s(d,{id:"total_amount",ref:"total_amount",modelValue:a.formData.total_amount,"onUpdate:modelValue":t[28]||(t[28]=e=>a.formData.total_amount=e),type:"number",step:"0.01",class:"mt-1 block w-full",autocomplete:"total_amount",readonly:""},null,8,["modelValue"])])]),qt,s(V,null,{default:h(()=>[D("Save")]),_:1})],32)])]),_:1})],64)}const Rt=A(P,[["render",Ut]]);export{Rt as default};
