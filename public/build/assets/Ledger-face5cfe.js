import{_ as b}from"./AuthenticatedLayout-f4db96e8.js";import{_ as x}from"./Pagination-10acd0c8.js";import{h as f}from"./html2pdf-fc64287f.js";import{h as v}from"./moment-fbc5633a.js";import{Z as D,j as w,K as k,k as g,o,c as n,a as C,d as t,t as a,F as m,l as y,g as h}from"./app-9f6ce993.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const R={components:{AuthenticatedLayout:b,Head:D,Pagination:x,Link:w},props:{ledgers:Object,name:Object,start_date:Date,end_date:Date,ledger_for:String},data(){return{user:k().props.auth.user,totalDeb:"0",totalCred:"0",balance:"0"}},methods:{formatDate(r){return r?v(r).format("DD-MM-YYYY"):""},calculateBalance(r,_){let e=0,p=0,c=0;for(let l=0;l<=_;l++){const d=r[l],s=(d.transactionable_type.split("\\").pop()==="CashReceivedVoucher"||d.transactionable_type.split("\\").pop()==="WSReturnInvoices")&&d.transactionable.total_amount||0,i=d.transactionable_type.split("\\").pop()==="WSInvoice"&&d.transactionable.total_amount||0;e+=i-s,p+=s,c+=i}return this.totalDeb=p,this.totalCred=c,this.balance=e,e===0?"0":e<0?Math.abs(e)+" DR":this.balance=e+" CR"},calculateVendorBalance(r,_){let e=0,p=0,c=0;for(let l=0;l<=_;l++){const d=r[l];if(d){const s=d.transactionable_type.split("\\").pop();let i=0,u=0;s==="CashPaymentVoucher"?i=d.transactionable.total_amount||0:s==="PurchaseReturnInvoices"?i=d.transactionable.net_amount||0:s==="PurchaseInvoice"&&(u=d.transactionable.net_amount||0),p+=i,c+=u,e+=u-i}}return this.totalDeb=p,this.totalCred=c,this.balance=e,e===0?"0":e<0?Math.abs(e)+" DR":this.balance=e+" CR"},calculateExpAndEmpBalance(r,_){let e=0,p=0,c=0;for(let l=0;l<=_;l++){const d=r[l],s=0,i=d.transactionable.total_amount;e+=i-s,p+=s,c+=i}return this.totalDeb=p,this.totalCred=c,this.balance=e,console.log(e),e===0?"0":e<0?Math.abs(e)+" DR":this.balance=e+" CR"},downloadPDF(){const r=document.getElementById("pdf-content");try{const _={margin:5,filename:"ledger.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};f().from(r).set(_).save()}catch(_){console.error("Error in downloadPDF:",_)}}}},B=t("meta",{charset:"utf-8"},null,-1),F=t("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1),V=t("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"},null,-1),E=t("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossorigin:"anonymous"},null,-1),I={id:"pdf-content"},A={class:"row"},S={class:"col heading"},j={class:"row"},L={class:"col heading"},W={class:"row"},T={class:"col heading"},M=t("div",{class:"row"},[t("div",{class:"col heading"},[t("h2",null,"Ledger Report")])],-1),N={class:"flex space-x-4"},X=t("div",{class:"w-1/8"},[t("p",null,"A/C Name:")],-1),Y={class:"w-1/6"},G=t("div",{class:"w-1/8"},[t("p",null,"From Date:")],-1),H={class:"w-1/6"},O=t("div",{class:"w-1/8"},[t("p",null,"To Date:")],-1),q={class:"w-1/6"},J={class:"w-full whitespace-no-wrap"},K=t("thead",null,[t("tr",{class:"text-xs font-semibold tracking-wide text-left text-black-500 uppercase bg-gray-300 border-b"},[t("th",{class:"px-4 py-3"},"Date"),t("th",{class:"px-4 py-3"},"Description"),t("th",{class:"px-4 py-3"},"Debit"),t("th",{class:"px-4 py-3"},"Credit"),t("th",{class:"px-4 py-3"},"Balance")])],-1),Q={key:0,class:"bg-white divide-y"},Z={class:"text-gray-700"},z={class:"px-2 py-1 text-sm"},U={key:0},$={class:"px-2 py-1 text-sm"},tt={class:"px-2 py-1 text-sm"},st={key:0},et={key:1},at={class:"px-2 py-1 text-sm"},ot={key:0},nt={key:1},lt={class:"px-2 py-1 text-sm"},ct={class:"text-gray-700"},it=t("td",{class:"px-2 py-1 text-sm"},null,-1),dt=t("td",{class:"px-2 py-1 text-sm"}," Total ",-1),_t={class:"px-2 py-1 text-sm"},rt={class:"px-2 py-1 text-sm"},pt={class:"px-2 py-1 text-sm"},ht={key:1,class:"bg-white divide-y"},mt={class:"text-gray-700"},ut={class:"px-2 py-1 text-sm"},yt={key:0},bt={class:"px-2 py-1 text-sm"},xt=t("td",{class:"px-2 py-1 text-sm"},[t("span",null,"-")],-1),ft={class:"px-2 py-1 text-sm"},vt={key:0},Dt={key:1},wt={class:"px-2 py-1 text-sm"},kt={class:"text-gray-700"},gt=t("td",{class:"px-2 py-1 text-sm"},null,-1),Ct=t("td",{class:"px-2 py-1 text-sm"}," Total ",-1),Pt={class:"px-2 py-1 text-sm"},Rt={class:"px-2 py-1 text-sm"},Bt={class:"px-2 py-1 text-sm"},Ft={key:2,class:"bg-white divide-y"},Vt={class:"text-gray-700"},Et={class:"px-2 py-1 text-sm"},It={key:0},At={class:"px-2 py-1 text-sm"},St={class:"px-2 py-1 text-sm"},jt={key:0},Lt={key:1},Wt={key:2},Tt={class:"px-2 py-1 text-sm"},Mt={key:0},Nt={key:1},Xt={class:"px-2 py-1 text-sm"},Yt={class:"text-gray-700"},Gt=t("td",{class:"px-2 py-1 text-sm"},null,-1),Ht=t("td",{class:"px-2 py-1 text-sm"}," Total ",-1),Ot={class:"px-2 py-1 text-sm"},qt={class:"px-2 py-1 text-sm"},Jt={class:"px-2 py-1 text-sm"},Kt=t("br",null,null,-1),Qt=t("div",{class:"flex space-x-4 absolute bottom-0 w-full",id:"ledger-footer"},[t("div",{class:"w-1/2"},[t("p",null,"Developed By Relyma Solutions +92-333-6005212")]),t("div",{class:"w-1/4"},[t("p",null,"Date: ")]),t("div",{class:"w-1/4"},[t("p",null,"Gen By: ")])],-1);function Zt(r,_,e,p,c,l){const d=g("Head");return o(),n(m,null,[C(d,{title:"Ledger"}),B,F,V,E,t("button",{class:"btn btn-primary",onClick:_[0]||(_[0]=(...s)=>l.downloadPDF&&l.downloadPDF(...s))},"Download PDF"),t("div",I,[t("div",A,[t("div",S,[t("h2",null,a(c.user.company_name),1)])]),t("div",j,[t("div",L,[t("h4",null,a(c.user.address),1)])]),t("div",W,[t("div",T,[t("h4",null,a(c.user.mobile_no),1)])]),M,t("div",N,[X,t("div",Y,[t("p",null,a(e.name),1)]),G,t("div",H,[t("p",null,a(l.formatDate(e.start_date)),1)]),O,t("div",q,[t("p",null,a(l.formatDate(e.end_date)),1)])]),t("table",J,[K,e.ledger_for=="Cust"?(o(),n("tbody",Q,[(o(!0),n(m,null,y(e.ledgers,(s,i)=>(o(),n("tr",Z,[t("td",z,[s.transactionable.sale_date?(o(),n("span",U,a(l.formatDate(s.transactionable.sale_date)),1)):h("",!0)]),t("td",$,a(s.transactionable_type.split("\\").pop()+" - "+s.transactionable.id+" - "+s.transactionable.desc),1),t("td",tt,[s.transactionable_type.split("\\").pop()==="CashReceivedVoucher"||s.transactionable_type.split("\\").pop()==="WSReturnInvoices"?(o(),n("span",st,a(s.transactionable.total_amount),1)):(o(),n("span",et,"-"))]),t("td",at,[s.transactionable_type.split("\\").pop()==="WSInvoice"?(o(),n("span",ot,a(s.transactionable.total_amount),1)):(o(),n("span",nt,"-"))]),t("td",lt,a(l.calculateBalance(e.ledgers,i)),1)]))),256)),t("tr",ct,[it,dt,t("td",_t,a(c.totalDeb),1),t("td",rt,a(c.totalCred),1),t("td",pt,a(c.balance),1)])])):h("",!0),e.ledger_for=="ExpAndEmp"?(o(),n("tbody",ht,[(o(!0),n(m,null,y(e.ledgers,(s,i)=>(o(),n("tr",mt,[t("td",ut,[s.transactionable.voucher_date?(o(),n("span",yt,a(l.formatDate(s.transactionable.voucher_date)),1)):h("",!0)]),t("td",bt,a(s.transactionable_type.split("\\").pop()+" - "+s.transactionable.id+" - "+s.transactionable.desc),1),xt,t("td",ft,[s.transactionable_type.split("\\").pop()==="CashPaymentVoucher"?(o(),n("span",vt,a(s.transactionable.total_amount),1)):(o(),n("span",Dt,"-"))]),t("td",wt,a(l.calculateExpAndEmpBalance(e.ledgers,i)),1)]))),256)),t("tr",kt,[gt,Ct,t("td",Pt,a(c.totalDeb),1),t("td",Rt,a(c.totalCred),1),t("td",Bt,a(c.balance),1)])])):h("",!0),e.ledger_for=="Vendor"?(o(),n("tbody",Ft,[(o(!0),n(m,null,y(e.ledgers,(s,i)=>(o(),n("tr",Vt,[t("td",Et,[s.transactionable.voucher_date?(o(),n("span",It,a(l.formatDate(s.transactionable.voucher_date)),1)):h("",!0)]),t("td",At,a(s.transactionable_type.split("\\").pop()+" - "+s.transactionable.id+" - "+s.transactionable.desc),1),t("td",St,[s.transactionable_type.split("\\").pop()==="CashPaymentVoucher"?(o(),n("span",jt,a(s.transactionable.total_amount),1)):s.transactionable_type.split("\\").pop()==="PurchaseReturnInvoices"?(o(),n("span",Lt,a(s.transactionable.net_amount),1)):(o(),n("span",Wt,"-"))]),t("td",Tt,[s.transactionable_type.split("\\").pop()==="PurchaseInvoice"?(o(),n("span",Mt,a(s.transactionable.net_amount),1)):(o(),n("span",Nt,"-"))]),t("td",Xt,a(l.calculateVendorBalance(e.ledgers,i)),1)]))),256)),t("tr",Yt,[Gt,Ht,t("td",Ot,a(c.totalDeb),1),t("td",qt,a(c.totalCred),1),t("td",Jt,a(c.balance),1)])])):h("",!0)]),Kt,Qt])],64)}const as=P(R,[["render",Zt]]);export{as as default};
